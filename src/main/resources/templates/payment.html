<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">

<head>
	<meta charset="UTF-8">
	<title>決済画面</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

	<div class="container mt-5">
		<div class="col-md-6 mx-auto">

			<h2 class="text-center mb-4">決済画面</h2>

			<!-- 選択プラン情報 -->
			<div class="alert alert-info text-center">
				<h4 th:text="'選択プラン：' + ${planName}"></h4>
				<p class="fw-bold mb-0">支払金額：
					<span th:text="${amount}"></span> 円
				</p>
			</div>

			<!-- エラーメッセージ -->
			<div th:if="${errorMessage}" class="alert alert-danger text-center" th:text="${errorMessage}"></div>

			<form th:action="@{/payment/execute}" method="post" class="p-4 bg-white border rounded">

				<!-- ★ CSRF トークン -->
				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

				<!-- hidden: プラン名 / 金額 -->
				<input type="hidden" name="planName" th:value="${planName}">
				<input type="hidden" name="amount" th:value="${amount}">

				<!-- カード番号 -->
				<div class="mb-3">
					<label for="cardNumber" class="form-label">クレジットカード番号</label>
					<input id="cardNumber" name="cardNumber" type="text" class="form-control" maxlength="16"
						placeholder="半角数字16桁" required>
				</div>

				<!-- カード名義 -->
				<div class="mb-3">
					<label for="cardName" class="form-label">カード名義</label>
					<input id="cardName" name="cardName" type="text" class="form-control" placeholder="TARO YAMADA"
						required>
				</div>

				<!-- 有効期限 -->
				<div class="mb-3">
					<label for="expiry" class="form-label">有効期限 (MM/YY)</label>
					<input id="expiry" name="expiry" type="text" class="form-control" maxlength="5" placeholder="08/27"
						required>
				</div>

				<!-- セキュリティコード -->
				<div class="mb-3">
					<label for="cvv" class="form-label">セキュリティコード (CVV)</label>
					<input id="cvv" name="cvv" type="password" class="form-control" maxlength="3" placeholder="3桁"
						required>
				</div>

				<!-- ▼ ボタンエリア（左：戻る、右：支払い実行） -->
				<div class="d-flex justify-content-between mt-4">
					<a th:href="@{/plan}" class="btn btn-outline-secondary px-4" style="padding-top: 10px;">
						戻る
					</a>

					<button type="submit" class="btn btn-primary btn-lg">支払い実行</button>
				</div>


			</form>
		</div>
	</div>

</body>

</html>