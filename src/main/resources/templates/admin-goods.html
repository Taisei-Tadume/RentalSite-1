<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>在庫管理（従業員用）</title>
</head>
<body>

<h1>在庫管理（従業員用）</h1>

<!-- ▼ 一覧と在庫編集 -->
<table border="1">
    <tr>
        <th>ID</th>
        <th>商品名</th>
        <th>カテゴリ</th>
        <th>ジャンル</th>
        <th>在庫</th>
        <th>更新</th>
    </tr>

    <tr th:each="g : ${goodsList}">
        <form th:action="@{/admin/stock/update}" method="post">

            <!-- CSRF -->
            <input type="hidden"
                   th:name="${_csrf.parameterName}"
                   th:value="${_csrf.token}">

            <td th:text="${g.goodsId}"></td>

            <td>
                <input name="goodsName" th:value="${g.goodsName}">
            </td>

            <td>
                <select name="categoryId">
                    <option th:each="c : ${categoryList}"
                            th:value="${c.categoryId}"
                            th:text="${c.categoryName}"
                            th:selected="${c.categoryId == g.categoryId}">
                    </option>
                </select>
            </td>

            <td>
                <select name="genreId">
                    <option th:each="gen : ${genreList}"
                            th:value="${gen.genreId}"
                            th:text="${gen.genreName}"
                            th:selected="${gen.genreId == g.genreId}">
                    </option>
                </select>
            </td>

            <td>
                <input type="number" name="quantity" th:value="${g.quantity}">
            </td>

            <td>
                <input type="hidden" name="goodsId" th:value="${g.goodsId}">
                <button type="submit">更新</button>
            </td>
        </form>
    </tr>
</table>

<hr>

<!-- ▼ 新規商品登録 -->
<h2>新規商品登録</h2>

<form th:action="@{/admin/stock/add}" method="post">

    <!-- CSRF -->
    <input type="hidden"
           th:name="${_csrf.parameterName}"
           th:value="${_csrf.token}">

    商品名:<input name="goodsName"><br>

    カテゴリ:
    <select name="categoryId">
        <option th:each="c : ${categoryList}"
                th:value="${c.categoryId}"
                th:text="${c.categoryName}">
        </option>
    </select><br>

    ジャンル:
    <select name="genreId">
        <option th:each="gen : ${genreList}"
                th:value="${gen.genreId}"
                th:text="${gen.genreName}">
        </option>
    </select><br>

    在庫: <input type="number" name="quantity"><br>
    JANコード: <input name="janCode"><br>
    画像URL: <input name="imageUrl"><br>

    <button type="submit">登録</button>
</form>

</body>
</html>
