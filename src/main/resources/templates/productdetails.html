<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">

<head>
	<meta charset="UTF-8">
	<title>商品詳細</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
	<div>
		<div th:replace="~{header :: siteHeader}"></div>


		<main class="container my-5">
			<div class="row justify-content-center text-center">
				<div class="col-md-6">
					<!-- 商品画像 -->
					<div class="mb-4">
						<img th:src="${product.imageUrl}" class="img-fluid rounded" alt="商品画像">
					</div>

					<!-- 商品名 -->
					<h2 th:text="${product.title}" class="mb-3">商品名</h2>

					<!-- 商品説明 -->
					<p th:text="${product.description}" class="mb-4">商品説明がここに入ります。</p>

					<!-- 数量 + カートに追加（横並び） -->
					<div class="d-flex justify-content-center align-items-center gap-3">
						<div class="d-flex align-items-center">
							<label class="me-2">数量:</label>
							<div class="input-group" style="width: 120px;">
								<button class="btn btn-outline-secondary" type="button"
									onclick="decreaseQty()">-</button>
								<input id="quantity" name="quantity" type="text" class="form-control text-center"
									value="1" readonly>
								<button class="btn btn-outline-secondary" type="button"
									onclick="increaseQty()">+</button>
							</div>
						</div>

						<form id="cartForm" method="post" action="/cart/add">
							<input type="hidden" name="goodsId" th:value="${product.goodsId}">
							<input type="hidden" id="quantityInput" name="quantity" value="1">
							<button type="submit" class="btn btn-primary">カートに追加</button>
						</form>
					</div>
				</div>
			</div>
		</main>

		<div th:replace="~{footer :: siteFooter}"></div>

	</div>

	<!-- カート数量UIの設定 -->
	<script>
		function decreaseQty() {
			const qty = document.getElementById('quantity');
			const hidden = document.getElementById('quantityInput');
			if (parseInt(qty.value) > 1) {
				qty.value = parseInt(qty.value) - 1;
				hidden.value = qty.value;
			}
		}

		function increaseQty() {
			const qty = document.getElementById('quantity');
			const hidden = document.getElementById('quantityInput');
			qty.value = parseInt(qty.value) + 1;
			hidden.value = qty.value;
		}
	</script>

</body>

</html>